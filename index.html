<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>–ù–ì-–≥–æ–ª–æ–≤–æ–ª–æ–º–∫–∞: Turing Complete</title>
  <style>
    :root{
      --bg:#070b10; --panel:#0e1622; --panel2:#0b1220;
      --text:#d7e2f0; --muted:#9fb2cc; --good:#43f58a; --bad:#ff5e7a;
      --accent:#7aa2ff; --border:#1e2c44;
    }
    *{box-sizing:border-box}
    body{
      margin:0; background:radial-gradient(1200px 600px at 30% -10%, #0e1a33 0, rgba(7,11,16,0) 60%),
                 radial-gradient(900px 500px at 90% 10%, #121f3c 0, rgba(7,11,16,0) 55%),
                 var(--bg);
      color:var(--text); font:16px/1.45 ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      min-height:100vh;
    }
    a{color:var(--accent)}
    .wrap{max-width:920px; margin:0 auto; padding:24px}
    .header{
      display:flex; gap:14px; align-items:flex-start; justify-content:space-between; flex-wrap:wrap;
      margin-bottom:18px;
    }
    .title{
      margin:0; font-size:20px; letter-spacing:.2px
    }
    .subtitle{margin:6px 0 0; color:var(--muted); font-size:13px; max-width:70ch}
    .panel{
      background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
      border:1px solid var(--border);
      border-radius:16px;
      padding:18px;
      box-shadow:0 10px 30px rgba(0,0,0,.35);
    }
    .topbar{
      display:flex; gap:10px; align-items:center; justify-content:space-between; flex-wrap:wrap;
      margin-bottom:12px;
    }
    .progress{
      display:flex; gap:8px; align-items:center; flex-wrap:wrap; color:var(--muted); font-size:12px;
    }
    .pill{
      padding:4px 10px; border-radius:999px; border:1px solid var(--border);
      background:rgba(122,162,255,0.08);
      color:var(--text);
    }
    .grid{
      display:grid; grid-template-columns:1fr; gap:14px;
    }
    @media (min-width: 760px){
      .grid{grid-template-columns:1.15fr .85fr}
    }
    .card{
      background:rgba(255,255,255,0.02);
      border:1px solid var(--border);
      border-radius:14px;
      padding:14px;
    }
    h2{margin:0 0 10px; font-size:16px}
    p{margin:8px 0}
    .muted{color:var(--muted)}
    .kbd{
      display:inline-block; padding:2px 8px; border-radius:8px;
      background:rgba(255,255,255,0.04); border:1px solid var(--border);
    }
    .row{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
    input[type="text"]{
      width:min(520px, 100%);
      padding:10px 12px;
      border-radius:12px;
      border:1px solid var(--border);
      background:var(--panel2);
      color:var(--text);
      outline:none;
    }
    input[type="text"]:focus{border-color:rgba(122,162,255,.8); box-shadow:0 0 0 3px rgba(122,162,255,.15)}
    button{
      padding:10px 12px;
      border-radius:12px;
      border:1px solid var(--border);
      background:rgba(122,162,255,0.10);
      color:var(--text);
      cursor:pointer;
    }
    button:hover{background:rgba(122,162,255,0.18)}
    button:disabled{opacity:.5; cursor:not-allowed}
    .status{min-height:20px; font-size:12px; margin-top:6px}
    .ok{color:var(--good)}
    .err{color:var(--bad)}
    .diagram{
      width:100%;
      border:1px dashed rgba(122,162,255,.25);
      border-radius:12px;
      padding:12px;
      background:rgba(0,0,0,.18);
      overflow:auto;
    }
    pre{margin:0; white-space:pre; color:var(--text)}
    .bits{
      display:flex; gap:6px; flex-wrap:wrap; margin-top:8px;
    }
    .bit{
      padding:4px 8px; border-radius:10px;
      border:1px solid var(--border);
      background:rgba(255,255,255,0.03);
      font-size:12px;
    }
    .footer{
      margin-top:16px; color:var(--muted); font-size:12px; display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap;
    }
    .reveal{
      display:none;
      margin-top:12px;
      padding:14px;
      border-radius:14px;
      border:1px solid rgba(67,245,138,.35);
      background:rgba(67,245,138,.06);
    }
    .key{
      font-size:18px;
      letter-spacing:2px;
      padding:8px 10px;
      border-radius:12px;
      border:1px solid rgba(67,245,138,.35);
      background:rgba(0,0,0,.18);
      display:inline-block;
    }
    .small{font-size:11px}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="header">
      <div>
        <h1 class="title">üéÑ –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è –ª–æ–≥–∏–∫–∏ ‚Äî –¥–æ—Å—Ç—É–ø –∫ –ø–æ–¥–∞—Ä–∫—É</h1>
        <p class="subtitle">
          –ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –∫–ª—é—á, –Ω—É–∂–Ω–æ –ø—Ä–æ–π—Ç–∏ –º–∞–ª–µ–Ω—å–∫–∏–π ¬´—É—á–µ–±–Ω—ã–π¬ª –ø—É—Ç—å: –ª–æ–≥–∏–∫–∞ ‚Üí –¥–≤–æ–∏—á–Ω–æ–µ ‚Üí —Ä–µ–≥–∏—Å—Ç—Ä—ã ‚Üí –ø–æ—Ä—è–¥–æ–∫ –∫–æ–º–∞–Ω–¥.
          (–ü–æ–¥—Å–∫–∞–∑–∫–∞: –≤ <span class="kbd">Turing Complete</span> –≤—Å—ë —Ä–æ–≤–Ω–æ —Ç–∞–∫ –∏ —É—Å—Ç—Ä–æ–µ–Ω–æ.)
        </p>
      </div>
      <div class="progress">
        <span class="pill">–®–∞–≥ <span id="stepNum">1</span>/4</span>
        <span class="pill">–§—Ä–∞–≥–º–µ–Ω—Ç—ã: <span id="fragCount">0</span>/3</span>
      </div>
    </div>

    <div class="panel">
      <!-- STEP 1 -->
      <section class="step" id="step1">
        <div class="grid">
          <div class="card">
            <h2>–®–∞–≥ 1 ‚Äî –õ–æ–≥–∏—á–µ—Å–∫–∏–µ –≤–µ–Ω—Ç–∏–ª–∏</h2>
            <p class="muted">–í—ã—á–∏—Å–ª–∏ –≤—ã—Ö–æ–¥ —Å—Ö–µ–º—ã. –û—Ç–≤–µ—Ç ‚Äî <span class="kbd">0</span> –∏–ª–∏ <span class="kbd">1</span>.</p>

            <div class="diagram" aria-label="–õ–æ–≥–∏—á–µ—Å–∫–∞—è —Å—Ö–µ–º–∞">
<pre>
–î–∞–Ω–æ: A=1, B=0

          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
A ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   AND     ‚îÇ‚îÄ‚îÄ‚îÄ‚îê
B ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ (A AND B) ‚îÇ   ‚îÇ
          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
                          ‚ñº
                      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
B ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê            ‚îÇ  OR   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂ OUT
         ‚ñº            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê             ü†â
     ‚îÇ NOT  ‚îÇ-------------|
     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</pre>
            </div>

            <div class="row" style="margin-top:10px">
              <input id="a1" type="text" inputmode="numeric" placeholder="OUT = ?" autocomplete="off" />
              <button id="b1">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
            </div>
            <div class="status" id="s1"></div>
          </div>

          <div class="card">
            <h2>–ó–∞–º–µ—Ç–∫–∏</h2>
            <p>–§–æ—Ä–º—É–ª–∞ —ç—Ç–æ–π —Å—Ö–µ–º—ã:</p>
            <p class="kbd">(A AND B) OR (NOT B)</p>
            <p class="muted small">
              –ï—Å–ª–∏ –≤—Å—ë –≤–µ—Ä–Ω–æ ‚Äî –ø–æ–ª—É—á–∏—à—å 1-–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∫–ª—é—á–∞.
            </p>
          </div>
        </div>
      </section>

      <!-- STEP 2 -->
      <section class="step" id="step2" style="display:none">
        <div class="grid">
          <div class="card">
            <h2>–®–∞–≥ 2 ‚Äî –î–≤–æ–∏—á–Ω–æ–µ ‚Üí ASCII</h2>
            <p class="muted">–ü—Ä–µ–æ–±—Ä–∞–∑—É–π –±–∞–π—Ç –≤ —Å–∏–º–≤–æ–ª (ASCII). –í–≤–µ–¥–∏ <b>–±—É–∫–≤—É</b>.</p>

            <div class="diagram">
              <p style="margin:0 0 8px" class="muted">–ë–∞–π—Ç:</p>
              <div class="bits" id="byteChips"></div>
            </div>

            <div class="row" style="margin-top:10px">
              <input id="a2" type="text" placeholder="–°–∏–º–≤–æ–ª = ?" maxlength="1" autocomplete="off" />
              <button id="b2">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
            </div>
            <div class="status" id="s2"></div>
          </div>

          <div class="card">
            <h2>–ü–æ–¥—Å–∫–∞–∑–∫–∞</h2>
            <p class="muted">
              –î–≤–æ–∏—á–Ω–æ–µ —á–∏—Å–ª–æ ‚Üí –¥–µ—Å—è—Ç–∏—á–Ω–æ–µ ‚Üí —Ç–∞–±–ª–∏—Ü–∞ ASCII.
              –≠—Ç–æ –æ–¥–∏–Ω —Å–∏–º–≤–æ–ª.
            </p>
            <p class="muted small">
              (–ï—Å–ª–∏ –Ω–µ —Ö–æ—á–µ—à—å –≥—É–≥–ª–∏—Ç—å ASCII: 65 = 'A', 66 = 'B', 67 = 'C' ‚Ä¶)
            </p>
          </div>
        </div>
      </section>

      <!-- STEP 3 -->
      <section class="step" id="step3" style="display:none">
        <div class="grid">
          <div class="card">
            <h2>–®–∞–≥ 3 ‚Äî –†–µ–≥–∏—Å—Ç—Ä—ã</h2>
            <p class="muted">–ü—Ä–æ—Å–ª–µ–¥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π. –û—Ç–≤–µ—Ç ‚Äî —á–∏—Å–ª–æ.</p>

            <div class="diagram">
<pre id="asmBox"></pre>
            </div>

            <div class="row" style="margin-top:10px">
              <input id="a3" type="text" inputmode="numeric" placeholder="–ó–Ω–∞—á–µ–Ω–∏–µ R1 = ?" autocomplete="off" />
              <button id="b3">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
            </div>
            <div class="status" id="s3"></div>
          </div>

          <div class="card">
            <h2>–£—Å–ª–æ–≤–∏–µ</h2>
            <p class="muted">
              <span class="kbd">ADD R1, R2</span> –æ–∑–Ω–∞—á–∞–µ—Ç <span class="kbd">R1 = R1 + R2</span><br/>
              <span class="kbd">XOR R1, k</span> –æ–∑–Ω–∞—á–∞–µ—Ç –ø–æ–±–∏—Ç–æ–≤–æ–µ XOR —Å —á–∏—Å–ª–æ–º <span class="kbd">k</span> (–º–æ–∂–Ω–æ –ø–æ—Å—á–∏—Ç–∞—Ç—å –≤ –¥–≤–æ–∏—á–Ω–æ–º).
            </p>
            <p class="muted small">
              –ï—Å–ª–∏ –≤—Å—ë –≤–µ—Ä–Ω–æ ‚Äî –ø–æ–ª—É—á–∏—à—å 3-–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∫–ª—é—á–∞.
            </p>
          </div>
        </div>
      </section>

      <!-- STEP 4 -->
      <section class="step" id="step4" style="display:none">
        <div class="grid">
          <div class="card">
            <h2>–®–∞–≥ 4 ‚Äî –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</h2>
            <p class="muted">
              –§–∏–Ω–∞–ª—å–Ω—ã–π —à—Ç—Ä–∏—Ö: –≤–ø–∏—à–∏ –ø–æ—Ä—è–¥–æ–∫ —Å—Ç–∞–¥–∏–π —Ü–∏–∫–ª–∞ –∫–æ–º–∞–Ω–¥—ã –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞, —Ä–∞–∑–¥–µ–ª—è—è –¥–µ—Ñ–∏—Å–∞–º–∏.
              –ü—Ä–∏–º–µ—Ä —Ñ–æ—Ä–º–∞—Ç–∞: <span class="kbd">A-B-C-D</span>
            </p>
            <div class="diagram">
<pre>
–°—Ç–∞–¥–∏–∏:
1) Decode
2) Fetch
3) Execute
4) Store

–í–≤–µ–¥–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫:
(–ü–æ–¥—Å–∫–∞–∑–∫–∞: –∫–ª–∞—Å—Å–∏–∫–∞ CPU)
</pre>
            </div>

            <div class="row" style="margin-top:10px">
              <input id="a4" type="text" placeholder="–ù–∞–ø—Ä.: Fetch-Decode-..." autocomplete="off" />
              <button id="b4">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
            </div>
            <div class="status" id="s4"></div>

            <div class="reveal" id="revealBox">
              <p style="margin:0 0 8px">‚úÖ –î–æ—Å—Ç—É–ø –æ—Ç–∫—Ä—ã—Ç. –¢–≤–æ–π –∫–ª—é—á:</p>
              <div class="key" id="finalKey">XXXXX-XXXXX-XXXXX</div>
              <p class="muted small" style="margin:8px 0 0">
                –° –ù–æ–≤—ã–º –≥–æ–¥–æ–º! üéâ
              </p>
            </div>
          </div>

          <div class="card">
            <h2>–°–æ–±—Ä–∞–Ω–Ω—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã</h2>
            <p class="muted">–û–Ω–∏ —Å–∫–ª–µ—è—Ç—Å—è –≤ –∫–ª—é—á –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –∫–æ–≥–¥–∞ –ø—Ä–æ–π–¥—ë—à—å —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —à–∞–≥.</p>
            <div class="diagram">
              <pre id="fragBox">(–ø–æ–∫–∞ –ø—É—Å—Ç–æ)</pre>
            </div>
          </div>
        </div>
      </section>

      <div class="footer">
        <div>üß† –°–æ–≤–µ—Ç: –µ—Å–ª–∏ –∑–∞—Å—Ç—Ä—è–ª ‚Äî –¥—É–º–∞–π –∫–∞–∫ —Å—Ö–µ–º—ã: –ø—Ä–æ—Å—Ç—ã–µ —à–∞–≥–∏, —á—ë—Ç–∫–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è.</div>
        <div class="muted">–õ–æ–∫–∞–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ñ–ª–∞–π–Ω. –ü—Ä–æ—Å—Ç–æ –æ—Ç–∫—Ä–æ–π —ç—Ç–æ—Ç —Ñ–∞–π–ª –≤ –±—Ä–∞—É–∑–µ—Ä–µ.</div>
      </div>
    </div>
  </div>

  <script>
    // =========================
    // –ù–ê–°–¢–†–û–ô–ö–ò (–ü–û–ú–ï–ù–Ø–ô –ü–û–î –°–ï–ë–Ø)
    // =========================

    // –í–ê–ñ–ù–û: —ç—Ç–æ –î–ï–ú–û-–∫–ª—é—á. –ó–ê–ú–ï–ù–ò –Ω–∞ —Å–≤–æ–π —Ä–µ–∞–ª—å–Ω—ã–π –∫–ª—é—á Steam.
    const STEAM_KEY = "ABCD1-EFGH2-IJKL3";

    // –¢—Ä–∏ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –≤—ã–¥–∞–Ω—ã –∑–∞ —à–∞–≥–∏ 1‚Äì3.
    // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–Ω–∏ –±–µ—Ä—É—Ç—Å—è –∏–∑ –∫–ª—é—á–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (—É–¥–æ–±–Ω–æ).
    const FRAGMENTS = (() => {
      const clean = STEAM_KEY.replace(/[^A-Z0-9]/gi, "").toUpperCase();
      // 15 —Å–∏–º–≤–æ–ª–æ–≤ —É Steam –∫–ª—é—á–∞ –±–µ–∑ –¥–µ—Ñ–∏—Å–æ–≤. –†–∞–∑–æ–±—å—ë–º –Ω–∞ 3 —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞ –ø–æ 5.
      return [clean.slice(0,5), clean.slice(5,10), clean.slice(10,15)];
    })();

    // =========================
    // –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–û–ï
    // =========================
    const $ = (id) => document.getElementById(id);

    const state = {
      step: 1,
      fragments: []
    };

    function setStep(n){
      state.step = n;
      for (let i=1;i<=4;i++){
        $("step"+i).style.display = (i===n) ? "block" : "none";
      }
      $("stepNum").textContent = String(n);
      $("fragCount").textContent = String(state.fragments.length);
      updateFragBox();
      // –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è UI –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —à–∞–≥–æ–≤
      if (n === 2) renderByteChips(BYTE_PUZZLE.byte);
      if (n === 3) $("asmBox").textContent = REG_PUZZLE.programText;
    }

    function normalize(s){
      return String(s ?? "").trim();
    }

    function ok(el, msg){
      el.className = "status ok";
      el.textContent = msg;
    }

    function err(el, msg){
      el.className = "status err";
      el.textContent = msg;
    }

    function addFragment(idx){
      const frag = FRAGMENTS[idx];
      if (!state.fragments.includes(frag)) state.fragments.push(frag);
      $("fragCount").textContent = String(state.fragments.length);
      updateFragBox();
    }

    function updateFragBox(){
      $("fragBox").textContent = state.fragments.length
        ? state.fragments.map((f,i)=>`[${i+1}] ${f}`).join("\n")
        : "(–ø–æ–∫–∞ –ø—É—Å—Ç–æ)";
    }

    function showKey(){
      $("finalKey").textContent = STEAM_KEY.toUpperCase();
      $("revealBox").style.display = "block";
    }

    // =========================
    // –®–ê–ì 1: –ª–æ–≥–∏–∫–∞
    // OUT = (A AND B) OR (NOT B) –ø—Ä–∏ A=1, B=0 => 1
    // =========================
    const ANSWER1 = "1";

    $("b1").addEventListener("click", () => {
      const v = normalize($("a1").value);
      if (v === ANSWER1){
        ok($("s1"), `–í–µ—Ä–Ω–æ! –§—Ä–∞–≥–º–µ–Ω—Ç #1: ${FRAGMENTS[0]}`);
        addFragment(0);
        $("b1").disabled = true;
        setTimeout(()=>setStep(2), 600);
      } else {
        err($("s1"), "–ù–µ —Å–æ–≤—Å–µ–º. –ü—Ä–æ–≤–µ—Ä—å AND –∏ NOT –¥–ª—è B=0.");
      }
    });

    $("a1").addEventListener("keydown", (e)=>{ if (e.key==="Enter") $("b1").click(); });

    // =========================
    // –®–ê–ì 2: –¥–≤–æ–∏—á–Ω–æ–µ -> ASCII
    // =========================
    // –°–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –±–∞–π—Ç —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω –±—ã–ª –±—É–∫–≤–æ–π (A-Z) ‚Äî –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —ç—Ç–æ 'K' (75) => 01001011
    const BYTE_PUZZLE = {
      byte: "01001011",
      answerChar: "K"
    };

    function renderByteChips(byteStr){
      const box = $("byteChips");
      box.innerHTML = "";
      for (const ch of byteStr){
        const span = document.createElement("span");
        span.className = "bit";
        span.textContent = ch;
        box.appendChild(span);
      }
    }

    $("b2").addEventListener("click", () => {
      const v = normalize($("a2").value).toUpperCase();
      if (v === BYTE_PUZZLE.answerChar){
        ok($("s2"), `–í–µ—Ä–Ω–æ! –§—Ä–∞–≥–º–µ–Ω—Ç #2: ${FRAGMENTS[1]}`);
        addFragment(1);
        $("b2").disabled = true;
        setTimeout(()=>setStep(3), 600);
      } else {
        err($("s2"), "–ü–æ—á—Ç–∏. –≠—Ç–æ –æ–¥–∏–Ω ASCII-—Å–∏–º–≤–æ–ª (–ø—Ä–æ–≤–µ—Ä—å –¥–µ—Å—è—Ç–∏—á–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ).");
      }
    });

    $("a2").addEventListener("keydown", (e)=>{ if (e.key==="Enter") $("b2").click(); });

    // =========================
    // –®–ê–ì 3: —Ä–µ–≥–∏—Å—Ç—Ä—ã
    // =========================
    // –°–¥–µ–ª–∞–µ–º –ø—Ä–æ–≥—Ä–∞–º–º—É —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∏ –ø–æ–Ω—è—Ç–Ω–æ–π.
    // R1=12, R2=5
    // ADD => 17
    // XOR R1, 9 => 17 XOR 9 = 24 (10001 xor 01001 = 11000)
    const REG_PUZZLE = {
      answerR1: 24,
      programText:
`–î–∞–Ω–æ:
R1 = 12
R2 = 5

–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:
ADD R1, R2
XOR R1, 9

–í–æ–ø—Ä–æ—Å: —á–µ–º—É —Ä–∞–≤–Ω–æ R1 –≤ –∫–æ–Ω—Ü–µ?`
    };

    $("b3").addEventListener("click", () => {
      const v = normalize($("a3").value);
      const n = Number(v);
      if (Number.isFinite(n) && n === REG_PUZZLE.answerR1){
        ok($("s3"), `–í–µ—Ä–Ω–æ! –§—Ä–∞–≥–º–µ–Ω—Ç #3: ${FRAGMENTS[2]}`);
        addFragment(2);
        $("b3").disabled = true;
        setTimeout(()=>setStep(4), 600);
      } else {
        err($("s3"), "–ù–µ —Å—Ö–æ–¥–∏—Ç—Å—è. –°–Ω–∞—á–∞–ª–∞ ADD, –ø–æ—Ç–æ–º XOR (—É–¥–æ–±–Ω–æ –ø–æ—Å—á–∏—Ç–∞—Ç—å –≤ –¥–≤–æ–∏—á–Ω–æ–º).");
      }
    });

    $("a3").addEventListener("keydown", (e)=>{ if (e.key==="Enter") $("b3").click(); });

    // =========================
    // –®–ê–ì 4: –ø–æ—Ä—è–¥–æ–∫ —Å—Ç–∞–¥–∏–π
    // Fetch ‚Üí Decode ‚Üí Execute ‚Üí Store
    // =========================
    const ANSWER4 = "FETCH-DECODE-EXECUTE-STORE";

    $("b4").addEventListener("click", () => {
      const v = normalize($("a4").value).toUpperCase().replace(/\s+/g,"");
      if (v === ANSWER4){
        ok($("s4"), "–ò–¥–µ–∞–ª—å–Ω–æ. –°–∏—Å—Ç–µ–º–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞ ‚úÖ");
        $("b4").disabled = true;
        showKey();
      } else {
        err($("s4"), "–ü–æ—Ä—è–¥–æ–∫ –Ω–µ —Ç–æ—Ç. –ü–æ–¥—Å–∫–∞–∑–∫–∞: —Å–Ω–∞—á–∞–ª–∞ –∏–∑–≤–ª–µ—á—å, –ø–æ—Ç–æ–º —Ä–∞–∑–æ–±—Ä–∞—Ç—å, –∑–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω–∏—Ç—å, –ø–æ—Ç–æ–º —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å.");
      }
    });

    $("a4").addEventListener("keydown", (e)=>{ if (e.key==="Enter") $("b4").click(); });

    // —Å—Ç–∞—Ä—Ç
    setStep(1);
  </script>
</body>
</html>
